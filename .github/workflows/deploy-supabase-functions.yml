  - name: Setup Node
    uses: actions/setup-node@v4
    with:
      node-version: '20'

  - name: Install Supabase CLI
    run: npm i -g supabase

  - name: Supabase Login
    env:
      SUPABASE_ACCESS_TOKEN: ${{ secrets.SUPABASE_ACCESS_TOKEN }}
    run: supabase login --token "$SUPABASE_ACCESS_TOKEN"

  - name: Link Project
    run: supabase link --project-ref "${{ secrets.SUPABASE_PROJECT_ID }}"

  - name: Deploy strategy-tick
    run: supabase functions deploy strategy-tick
